<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>M-T-P - Đặt lịch mới</title>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/student-dashboard.css">
    <link rel="stylesheet" href="../css/transitions.css">
    <link rel="stylesheet" href="../css/student-book-new.css">
</head>
<body>
    <div class="app">

        <!-- SIDEBAR - Loaded dynamically -->
        <div id="sidebar-container"></div>

        <!-- MAIN AREA -->
        <div class="main">

            <!-- TOPBAR - Loaded dynamically -->
            <div id="topbar-container"></div>

            <!-- BREADCRUMB BAR -->
            <div class="breadcrumb-bar">
                <span class="material-icons">schedule</span>
                <span id="pageTitle">Đặt lịch mới</span>
            </div>

            <!-- CONTENT -->
            <main class="content">
                <div class="breadcrumb-back">
                    <span class="material-icons">arrow_back</span>
                    <a href="choose-session.html" class="back-link">Trở về trang trước</a>
                </div>

                <!-- Tutor Info -->
                <section class="tutor-info-card">
                    <div class="tutor-avatar">
                        <span class="material-icons">account_circle</span>
                    </div>
                    <div class="tutor-details">
                        <h2 id="tutorName">Loading...</h2>
                        <p id="tutorEmail" class="tutor-email"></p>
                    </div>
                </section>

                <!-- Availability Slots -->
                <section class="availability-section">
                    <h3 class="section-title">
                        <span class="material-icons">event_available</span>
                        Lịch rảnh của tutor
                    </h3>
                    
                    <div id="availabilityContainer" class="availability-container">
                        <!-- JS render slots here -->
                    </div>
                </section>
            </main>
            
        </div>
        
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Xác nhận đặt lịch</h3>
                <button class="close-btn" onclick="closeModal()">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="booking-info">
                    <p><strong>Tutor:</strong> <span id="modalTutorName"></span></p>
                    <p><strong>Môn học:</strong> <span id="modalSubject"></span></p>
                    <p><strong>Thời gian:</strong> <span id="modalDateTime"></span></p>
                </div>

            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal()">Hủy</button>
                <button class="btn btn-confirm" onclick="confirmBooking()">
                    <span class="material-icons">check_circle</span>
                    Xác nhận đặt lịch
                </button>
            </div>
        </div>
    </div>
    
    <!-- Load Component Loader -->
    <script src="../js/components-loader.js"></script>
    <!-- Load API Client -->
    <script src="../js/api-client.js"></script>
    <!-- Load Book New Schedule Logic -->
    <script src="../js/student-book-new.js"></script>
    
</body>
</html>
